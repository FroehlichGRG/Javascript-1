<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Домашнее задание №6-2</title>
    <link rel="stylesheet" href="css/lesson6-2.css">
    <script src="jscript/shopitems.js"></script>
</head>
<body>

<script>

    var quantityItems = 0;
    var summaryCartItems = 0;
    quantitt = 1;

    var cartObjectMassive = [];

    arrayCounter = 1;

    /* var cartarray = [
        ['Артикул', 'Название товара', 'Количество', 'Цена']
    ];

    var cartarray2 = [
        ['Артикул', 'Название товара', 'Количество', 'Цена']
    ];

     */

    var cartdivwrapper = document.createElement("div");
    cartdivwrapper.id = "cartdivwrapper";
    document.body.appendChild(cartdivwrapper);

    var cartdiv = document.createElement("div");
    cartdiv.id = "cartdiv";
    cartdivwrapper.appendChild(cartdiv);

    var itemsList = document.createElement("div");
    itemsList.id = "itemsList";
    cartdiv.appendChild(itemsList);

    var itemsListnumm = document.createElement("table");
    itemsListnumm.id = "cartTable";
    itemsList.appendChild(itemsListnumm);

    var rowCartNames = document.createElement("tr");
    rowCartNames.id = "cartRow";
    itemsListnumm.appendChild(rowCartNames);

    var columnCartNames = document.createElement("td");
    columnCartNames.id = "cartTableId";
    columnCartNames.innerText = "id";
    rowCartNames.appendChild(columnCartNames);

    var columnCartNames = document.createElement("td");
    columnCartNames.id = "cartTableName";
    columnCartNames.innerText = "название";
    rowCartNames.appendChild(columnCartNames);

    var columnCartNames = document.createElement("td");
    columnCartNames.id = "cartTablePrice";
    columnCartNames.innerText = "цена";
    rowCartNames.appendChild(columnCartNames);

    var CartText = document.createElement("p");
    CartText.innerText = "В вашей корзине " + quantityItems + " товаров.";
    cartdiv.appendChild(CartText);

    CartText = document.createElement("p");
    CartText.innerText = "На общую сумму " + summaryCartItems + " рублей.";
    cartdiv.appendChild(CartText);

    var outerdiv = document.createElement("div");
    outerdiv.id = "content";
    document.body.appendChild(outerdiv);

    var thumbnailWrapp = document.createElement("div");
    thumbnailWrapp.id = "thumbnailWrapp";
    outerdiv.appendChild(thumbnailWrapp);

    for (var i=0; i<ShopItem.length; i++) {
        var innerDiv = document.createElement("div");
        innerDiv.className = "shopitm";
        innerDiv.id = "shpitm-" + i;
        thumbnailWrapp.appendChild(innerDiv);

        var headrItems = document.createElement("h2");
        headrItems.innerText = ShopItem[i].name;
        innerDiv.appendChild(headrItems);

        var thumbimages = document.createElement("img");
        thumbimages.id = "shopitm-" + i;
        thumbimages.src = ShopItem[i].urlthumb;
        innerDiv.appendChild(thumbimages);

        var priceItems = document.createElement("p");
        priceItems.innerText = "Цена: " + ShopItem[i].price;
        innerDiv.appendChild(priceItems);

        var inptItems = document.createElement("INPUT");
        inptItems.setAttribute("type", "button");
        inptItems.setAttribute("id", "btnid-"+i);
        inptItems.setAttribute("value", "Добавить в корзину");
        inptItems.setAttribute("onclick", "addItemToCart(this.id)");
        innerDiv.appendChild(inptItems);

    }


    /* function addItemToCart(id) {
         idGet = '';
         for (i = 6; i < id.length; i++) {
             var idGet = idGet + id.charAt(i);
         }

         for (i = 0; i < cartarray.length; i++)
         {
             if (ShopItem[idGet].ind == cartarray[i][0] )
             {
                 mmm++
             }

             else {
                 cartarray[arrayCounter] = [ShopItem[idGet].ind, ShopItem[idGet].name, mmm, ShopItem[idGet].price];
             }
         }

         arrayCounter++;
         console.log(cartarray);
     }
 */

    function addItemToCart(id) {
        idGet = '';

        for (i = 6; i < id.length; i++) {
            var idGet = idGet + id.charAt(i);
        }

        if (cartObjectMassive[idGet].quant != true)

        {
            cartObjectMassive[idGet] = {
                name: ShopItem[idGet].name,
                price: ShopItem[idGet].price,
                quant: quantitt
            };
        }

        else
        {
            cartObjectMassive[idGet].quant++;
        }




        /*

        if  ('quant' in cartObjectMassive[idGet])
        {
            console.log("cartObjectMassive[idGet]" + cartObjectMassive[idGet].quant);

            quantitt++;

            cartObjectMassive[idGet]
            {
                quant: quantitt;
            }
        }

        else {

            cartObjectMassive[idGet] = {
                name: ShopItem[idGet].name,
                price: ShopItem[idGet].price,
                quant: quantitt
            };
        }

*/

        console.log(idGet);

        console.log(cartObjectMassive);
    }





</script>

</body>
</html>